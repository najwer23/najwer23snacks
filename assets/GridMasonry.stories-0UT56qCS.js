import{j as u}from"./jsx-runtime-DEdD30eg.js";import{r as o}from"./index-RYns6xqu.js";import{u as N}from"./useWindowSize-CPHTifbr.js";const j=()=>{const t=o.useRef(!1);return o.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),o.useCallback(()=>t.current,[])},k={width:void 0,height:void 0},O=t=>{const{ref:r,box:e="content-box"}=t,[{width:l,height:p},d]=o.useState(k),h=j(),i=o.useRef({...k}),m=o.useRef(void 0);return m.current=t.onResize,o.useEffect(()=>{if(!r.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([y])=>{const C=e==="border-box"?"borderBoxSize":e==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",c=_(y,C,"inlineSize"),f=_(y,C,"blockSize");if(i.current.width!==c||i.current.height!==f){const b={width:c,height:f};i.current.width=c,i.current.height=f,m.current?m.current(b):h()&&d(b)}});return g.observe(r.current,{box:e}),()=>{g.disconnect()}},[e,r,h]),{width:l,height:p}},_=(t,r,e)=>t[r]?Array.isArray(t[r])?t[r][0][e]:t[r][e]:r==="contentBoxSize"?t.contentRect[e==="inlineSize"?"width":"height"]:void 0,W="_masonryContainer_o1evb_8",G="_masonryColumn_o1evb_17",I="_masonryColumnChild_o1evb_24",x={masonryContainer:W,masonryColumn:G,masonryColumnChild:I},R=({arrWithChildren:t,onHeightChange:r,id:e})=>{const l=o.useRef(null),{height:p=0}=O({ref:l});return o.useEffect(()=>{r(p)},[p]),u.jsx("div",{ref:l,className:x.masonryColumn,children:o.Children.map(t,(d,h)=>u.jsx("div",{className:x.masonryColumnChild,children:d},e+h))},e)};R.__docgenInfo={description:"",methods:[],displayName:"GridMasonryColumn"};const E=({children:t,gap:r,col:e,onGridMasonryLoadEnd:l,delay:p=0})=>{const[d,h]=o.useState(0),{width:i}=N(),m=n=>n<767.98?e.mobile:n>=768.98&&n<1199.98?e.tablet:n>=1199.98&&n<1599.98?e.smallDesktop:n>=1599.98?e.desktop:3,[g,y]=o.useState(()=>m(i)),C=n=>Array.from({length:n}).map((a,s)=>({name:`col${s}`,arrWithElm:[],height:0})),[c,f]=o.useState(()=>C(g)),M=n=>[...n].sort((a,s)=>a.height-s.height)[0].name,b=(n,a)=>{f(c.map(s=>s.name===a?{...s,height:n}:s))};return o.useEffect(()=>{const n=setTimeout(()=>{m(i)!=g&&(h(0),y(m(i)),f(C(m(i))))},100);return()=>clearTimeout(n)},[i]),o.useEffect(()=>{const n=setTimeout(()=>{if(d<t.length){const a=M(c);f(c.map(s=>s.name===a?{...s,arrWithElm:[...s.arrWithElm,t[d]]}:s)),h(s=>s+1),d==t.length-1&&l&&l(!0)}},p);return()=>clearTimeout(n)},[JSON.stringify(c.map(({height:n})=>n))]),u.jsx("div",{className:x.masonryContainer,style:{"--n23snacks-c-masonry-column-mobile":e.mobile,"--n23snacks-c-masonry-column-tablet":e.tablet,"--n23snacks-c-masonry-column-small-desktop":e.smallDesktop,"--n23snacks-c-masonry-column-desktop":e.desktop,"--n23snacks-c-masonry-column-gap":r.col,"--n23snacks-c-masonry-row-gap":r.row},children:c.map(({arrWithElm:n,name:a})=>u.jsx(R,{arrWithChildren:n,onHeightChange:s=>b(s,a),id:a},"parent"+a))})};E.__docgenInfo={description:"",methods:[],displayName:"GridMasonry",props:{delay:{defaultValue:{value:"0",computed:!1},required:!1}}};const P={title:"Grid/GridMasonry",component:E,parameters:{layout:"centered"},tags:["autodocs"]},H=Array.from({length:20}).map((t,r)=>u.jsx("div",{style:{background:"#"+Math.floor(Math.random()*16777215).toString(16)},children:u.jsxs(u.Fragment,{children:[u.jsx("div",{children:r}),"MSMSM SMSS".repeat(Math.floor(Math.random()*160))]})},r)),S={args:{gap:{col:"20px",row:"20px"},col:{smallDesktop:3,desktop:3,mobile:1,tablet:2},children:H}};var v,z,w;S.parameters={...S.parameters,docs:{...(v=S.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    gap: {
      col: '20px',
      row: '20px'
    },
    col: {
      smallDesktop: 3,
      desktop: 3,
      mobile: 1,
      tablet: 2
    },
    children: items
  }
}`,...(w=(z=S.parameters)==null?void 0:z.docs)==null?void 0:w.source}}};const T=["GridMasonry"];export{S as GridMasonry,T as __namedExportsOrder,P as default};
