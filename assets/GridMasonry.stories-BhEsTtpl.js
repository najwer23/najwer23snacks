import{j as u}from"./jsx-runtime-DEdD30eg.js";import{r as s}from"./index-RYns6xqu.js";import{u as E}from"./useWindowSize-CPHTifbr.js";const j=()=>{const r=s.useRef(!1);return s.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[]),s.useCallback(()=>r.current,[])},k={width:void 0,height:void 0},G=r=>{const{ref:n,box:e="content-box"}=r,[{width:m,height:p},d]=s.useState(k),h=j(),i=s.useRef({...k}),l=s.useRef(void 0);return l.current=r.onResize,s.useEffect(()=>{if(!n.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([y])=>{const C=e==="border-box"?"borderBoxSize":e==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",c=z(y,C,"inlineSize"),f=z(y,C,"blockSize");if(i.current.width!==c||i.current.height!==f){const S={width:c,height:f};i.current.width=c,i.current.height=f,l.current?l.current(S):h()&&d(S)}});return g.observe(n.current,{box:e}),()=>{g.disconnect()}},[e,n,h]),{width:m,height:p}},z=(r,n,e)=>r[n]?Array.isArray(r[n])?r[n][0][e]:r[n][e]:n==="contentBoxSize"?r.contentRect[e==="inlineSize"?"width":"height"]:void 0,O="_masonryContainer_ew6k5_8",W="_masonryColumn_ew6k5_17",I="_masonryColumnChild_ew6k5_24",M={masonryContainer:O,masonryColumn:W,masonryColumnChild:I},x=({arrWithChildren:r,onHeightChange:n,id:e})=>{const m=s.useRef(null),{height:p=0}=G({ref:m});return s.useEffect(()=>{n(p)},[p]),u.jsx("div",{ref:m,className:M.masonryColumn,children:s.Children.map(r,(d,h)=>u.jsx("div",{className:M.masonryColumnChild,children:d},e+h))},e)};x.displayName="GridMasonryColumn";x.__docgenInfo={description:"",methods:[],displayName:"GridMasonryColumn"};const w=({children:r,gap:n,col:e,onGridMasonryLoadEnd:m,delay:p=0})=>{const[d,h]=s.useState(0),{width:i}=E(),l=t=>t<767.98?e.mobile:t>=768.98&&t<1199.98?e.tablet:t>=1199.98&&t<1599.98?e.smallDesktop:t>=1599.98?e.desktop:3,[g,y]=s.useState(()=>l(i)),C=t=>Array.from({length:t}).map((a,o)=>({name:`col${o}`,arrWithElm:[],height:0})),[c,f]=s.useState(()=>C(g)),_=t=>[...t].sort((a,o)=>a.height-o.height)[0].name,S=(t,a)=>{f(c.map(o=>o.name===a?{...o,height:t}:o))};return s.useEffect(()=>{const t=setTimeout(()=>{l(i)!=g&&(h(0),y(l(i)),f(C(l(i))))},100);return()=>clearTimeout(t)},[i]),s.useEffect(()=>{const t=setTimeout(()=>{if(d<r.length){const a=_(c);f(c.map(o=>o.name===a?{...o,arrWithElm:[...o.arrWithElm,r[d]]}:o)),h(o=>o+1),d==r.length-1&&m&&m(!0)}},p);return()=>clearTimeout(t)},[JSON.stringify(c.map(({height:t})=>t))]),u.jsx("div",{className:M.masonryContainer,style:{"--col-mobile":e.mobile,"--col-tablet":e.tablet,"--col-small-desktop":e.smallDesktop,"--col-desktop":e.desktop,"--col-gap":n.col,"--row-gap":n.row},children:c.map(({arrWithElm:t,name:a})=>u.jsx(x,{arrWithChildren:t,onHeightChange:o=>S(o,a),id:a},"parent"+a))})};w.displayName="GridMasonry";w.__docgenInfo={description:"",methods:[],displayName:"GridMasonry",props:{delay:{defaultValue:{value:"0",computed:!1},required:!1}}};const P={title:"Grid/GridMasonry",component:w,parameters:{layout:"centered"},tags:["autodocs"]},H=Array.from({length:20}).map((r,n)=>u.jsx("div",{style:{background:"#"+Math.floor(Math.random()*16777215).toString(16)},children:u.jsxs(u.Fragment,{children:[u.jsx("div",{children:n}),"MSMSM SMSS".repeat(Math.floor(Math.random()*160))]})},n)),b={args:{gap:{col:"20px",row:"20px"},col:{smallDesktop:3,desktop:3,mobile:1,tablet:2},children:H}};var v,N,R;b.parameters={...b.parameters,docs:{...(v=b.parameters)==null?void 0:v.docs,source:{originalSource:`{
  args: {
    gap: {
      col: '20px',
      row: '20px'
    },
    col: {
      smallDesktop: 3,
      desktop: 3,
      mobile: 1,
      tablet: 2
    },
    children: items
  }
}`,...(R=(N=b.parameters)==null?void 0:N.docs)==null?void 0:R.source}}};const T=["GridMasonry"];export{b as GridMasonry,T as __namedExportsOrder,P as default};
